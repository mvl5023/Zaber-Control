#include "zaberx.h"
#include "Arduino.h"


double p[] = { 0,  0.0235, 0.0470, 0.0705, 0.0940, 0.117,  0.141,  0.164,  0.188,  0.211,  0.235,  0.258,  0.282,  0.305,
0.329,  0.352,  0.376,  0.399,  0.423,  0.446,  0.470,  0.493,  0.517,  0.540,  0.564,  0.587,  0.611,  0.634,
0.658,  0.681,  0.705,  0.728,  0.752,  0.775,  0.799,  0.822,  0.846,  0.869,  0.893,  0.916,  0.940 };

double q[] = { 0,  0.132,  0.264,  0.397,  0.529,  0.662,  0.795,  0.928,  1.06, 1.20, 1.33, 1.46, 1.60, 1.74, 1.87, 2.01,
2.15, 2.29, 2.42, 2.57, 2.71, 2.85, 2.99, 3.14, 3.28, 3.43, 3.58, 3.73, 3.89, 4.05, 4.21, 4.37, 4.53, 4.69,
4.86, 5.04, 5.21, 5.39, 5.57, 5.76, 5.96 };

double q2[] = { 0,  0.284,  0.569,  0.853,  1.14, 1.42, 1.71, 1.99, 2.28, 2.57, 2.85, 3.14, 3.43, 3.72, 4,  4.29,
4.58, 4.87, 5.18, 5.49, 5.79, 6.09, 6.39, 6.70, 7.00, 7.31, 7.62, 7.93, 8.25, 8.57, 8.90, 9.23, 9.56,
9.89, 10.2, 10.6, 10.9, 11.3, 11.6, 12, 12.4 };

double sinTheta[] = { 0, 0.023492316, 0.046984631, 0.070476947, 0.093969262, 0.117461578, 0.140953893, 0.164446209,
0.187938524, 0.21143084, 0.234923155, 0.258415471, 0.281907786, 0.305400102, 0.328892417, 0.352384733, 0.375877048,
0.399369364, 0.422861679, 0.446353995, 0.46984631, 0.493338626, 0.516830941, 0.540323257, 0.563815572, 0.587307888,
0.610800204, 0.634292519, 0.657784835, 0.68127715, 0.704769466, 0.728261781, 0.751754097, 0.775246412, 0.798738728,
0.822231043, 0.845723359, 0.869215674, 0.89270799, 0.916200305, 0.939692621 };

double rho[] = { 0, 0.178426892, 0.355898073, 0.532893508, 0.709125549, 0.886320232, 1.063176925, 1.240768659,
1.419069573, 1.598480566, 1.778577794, 1.961189817, 2.143518039, 2.325050446, 2.507030916, 2.691546454,
2.873889022, 3.056470018, 3.241689384, 3.427912949, 3.614910833, 3.802831385, 3.990302327, 4.18260696,
4.374862337, 4.568737671, 4.765055727, 4.964141454, 5.166439954, 5.373842921, 5.583748739, 5.800304777,
6.020820707, 6.25117335, 6.489987839, 6.739378744, 7.000551408, 7.265536081, 7.540007199, 7.835627467,
8.165794602 };


int readAnalog(int analogPin, int iterations)
{
	long volTemp = 0;
	for (int i = 0; i < iterations; i++)
	{
		volTemp += analogRead(analogPin);
	}
	int voltage = volTemp / iterations;
	return voltage;
}

long mm(float mmValue)
{
	long dataValue;
	dataValue = mmValue / mmResolution;
	return dataValue;
}

long um(float umValue)
{
	long dataValue;
	dataValue = umValue / umResolution;
	return dataValue;
}

long stepsD(float degr)
{
	long stepValue;
	stepValue = degr / resolutionDeg;
	return stepValue;
}

long stepsR(float radis)
{
	long stepValue;
	stepValue = radis / resolutionRad;
	return stepValue;
}

double interp(double input)
{
	double out;
	int i = 0;
	while (input >= sinTheta[i])
	{
		i++;
	}
	out = rho[i - 1] + ((input - sinTheta[i - 1]) / (sinTheta[i] - sinTheta[i - 1])) * (rho[i] - rho[i - 1]);
	return out;
}

double interp1(double input)
{
	double out;
	int i = 0;
	while (input >= p[i])
	{
		i++;
	}
	out = q[i - 1] + ((input - p[i - 1]) / (p[i] - p[i - 1])) * (q[i] - q[i - 1]);
	return out;
}

double interp2(double input)
{
	double out;
	int i = 0;
	while (input >= p[i])
	{
		i++;
	}
	out = q2[i - 1] + ((input - p[i - 1]) / (p[i] - p[i - 1])) * (q2[i] - q2[i - 1]);
	return out;
}


